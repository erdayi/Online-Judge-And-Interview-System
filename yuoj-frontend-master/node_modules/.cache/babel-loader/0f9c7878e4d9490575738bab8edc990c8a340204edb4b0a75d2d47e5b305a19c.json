{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, h, reset } from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { observableFromEvent, transaction } from '../../../../base/common/observable.js';\nimport { autorun, autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { derived, derivedWithStore } from '../../../../base/common/observableImpl/derived.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle, applyViewZones } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class UnchangedRangesFeature extends Disposable {\n  get isUpdatingViewZones() {\n    return this._isUpdatingViewZones;\n  }\n  constructor(_editors, _diffModel, _options) {\n    super();\n    this._editors = _editors;\n    this._diffModel = _diffModel;\n    this._options = _options;\n    this._isUpdatingViewZones = false;\n    this._register(this._editors.original.onDidChangeCursorPosition(e => {\n      if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n        const m = this._diffModel.get();\n        transaction(tx => {\n          for (const s of this._editors.original.getSelections() || []) {\n            m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx);\n            m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);\n          }\n        });\n      }\n    }));\n    this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n      if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n        const m = this._diffModel.get();\n        transaction(tx => {\n          for (const s of this._editors.modified.getSelections() || []) {\n            m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx);\n            m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);\n          }\n        });\n      }\n    }));\n    const unchangedRegions = this._diffModel.map((m, reader) => {\n      var _a, _b;\n      return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : [];\n    });\n    const viewZones = derivedWithStore('view zones', (reader, store) => {\n      const origViewZones = [];\n      const modViewZones = [];\n      const sideBySide = this._options.renderSideBySide.read(reader);\n      const curUnchangedRegions = unchangedRegions.read(reader);\n      for (const r of curUnchangedRegions) {\n        if (r.shouldHideControls(reader)) {\n          continue;\n        }\n        {\n          const d = derived('hiddenOriginalRangeStart', reader => r.getHiddenOriginalRange(reader).startLineNumber - 1);\n          const origVz = new PlaceholderViewZone(d, 24);\n          origViewZones.push(origVz);\n          store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, !sideBySide));\n        }\n        {\n          const d = derived('hiddenModifiedRangeStart', reader => r.getHiddenModifiedRange(reader).startLineNumber - 1);\n          const modViewZone = new PlaceholderViewZone(d, 24);\n          modViewZones.push(modViewZone);\n          store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, false));\n        }\n      }\n      return {\n        origViewZones,\n        modViewZones\n      };\n    });\n    const unchangedLinesDecoration = {\n      description: 'unchanged lines',\n      className: 'diff-unchanged-lines',\n      isWholeLine: true\n    };\n    const unchangedLinesDecorationShow = {\n      description: 'Fold Unchanged',\n      glyphMarginHoverMessage: new MarkdownString(undefined, {\n        isTrusted: true,\n        supportThemeIcons: true\n      }).appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n      glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n      zIndex: 10001\n    };\n    this._register(applyObservableDecorations(this._editors.original, derived('decorations', reader => {\n      const curUnchangedRegions = unchangedRegions.read(reader);\n      const result = curUnchangedRegions.map(r => ({\n        range: r.originalRange.toInclusiveRange(),\n        options: unchangedLinesDecoration\n      }));\n      for (const r of curUnchangedRegions) {\n        if (r.shouldHideControls(reader)) {\n          result.push({\n            range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n            options: unchangedLinesDecorationShow\n          });\n        }\n      }\n      return result;\n    })));\n    this._register(applyObservableDecorations(this._editors.modified, derived('decorations', reader => {\n      const curUnchangedRegions = unchangedRegions.read(reader);\n      const result = curUnchangedRegions.map(r => ({\n        range: r.modifiedRange.toInclusiveRange(),\n        options: unchangedLinesDecoration\n      }));\n      for (const r of curUnchangedRegions) {\n        if (r.shouldHideControls(reader)) {\n          result.push({\n            range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\n            options: unchangedLinesDecorationShow\n          });\n        }\n      }\n      return result;\n    })));\n    this._register(applyViewZones(this._editors.original, viewZones.map(v => v.origViewZones), v => this._isUpdatingViewZones = v));\n    this._register(applyViewZones(this._editors.modified, viewZones.map(v => v.modViewZones), v => this._isUpdatingViewZones = v));\n    this._register(autorunWithStore2('update folded unchanged regions', (reader, store) => {\n      const curUnchangedRegions = unchangedRegions.read(reader);\n      this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n      this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n    }));\n    this._register(this._editors.modified.onMouseUp(event => {\n      var _a;\n      if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n        const lineNumber = event.target.position.lineNumber;\n        const model = this._diffModel.get();\n        if (!model) {\n          return;\n        }\n        const region = model.unchangedRegions.get().find(r => r.modifiedRange.includes(lineNumber));\n        if (!region) {\n          return;\n        }\n        region.setState(0, 0, undefined);\n        event.event.stopPropagation();\n        event.event.preventDefault();\n      }\n    }));\n    this._register(this._editors.original.onMouseUp(event => {\n      var _a;\n      if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n        const lineNumber = event.target.position.lineNumber;\n        const model = this._diffModel.get();\n        if (!model) {\n          return;\n        }\n        const region = model.unchangedRegions.get().find(r => r.originalRange.includes(lineNumber));\n        if (!region) {\n          return;\n        }\n        region.setState(0, 0, undefined);\n        event.event.stopPropagation();\n        event.event.preventDefault();\n      }\n    }));\n  }\n}\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n  constructor(_editor, _viewZone, _unchangedRegion, hide) {\n    const root = h('div.diff-hidden-lines-widget');\n    super(_editor, _viewZone, root.root);\n    this._editor = _editor;\n    this._unchangedRegion = _unchangedRegion;\n    this.hide = hide;\n    this._nodes = h('div.diff-hidden-lines', [h('div.top@top', {\n      title: 'Click or drag to show more above'\n    }), h('div.center@content', {\n      style: {\n        display: 'flex'\n      }\n    }, [h('div@first', {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }\n    }, [$('a', {\n      title: 'Show all',\n      role: 'button',\n      onclick: () => {\n        this._unchangedRegion.showAll(undefined);\n      }\n    }, ...renderLabelWithIcons('$(unfold)'))]), h('div@others', {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }\n    })]), h('div.bottom@bottom', {\n      title: 'Click or drag to show more below',\n      role: 'button'\n    })]);\n    root.root.appendChild(this._nodes.root);\n    const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n    if (!this.hide) {\n      this._register(applyStyle(this._nodes.first, {\n        width: layoutInfo.map(l => l.contentLeft)\n      }));\n    } else {\n      reset(this._nodes.first);\n    }\n    const editor = this._editor;\n    this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n      if (e.button !== 0) {\n        return;\n      }\n      this._nodes.top.classList.toggle('dragging', true);\n      this._nodes.root.classList.toggle('dragging', true);\n      e.preventDefault();\n      const startTop = e.clientY;\n      let didMove = false;\n      const cur = this._unchangedRegion.visibleLineCountTop.get();\n      this._unchangedRegion.isDragged.set(true, undefined);\n      const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n        const currentTop = e.clientY;\n        const delta = currentTop - startTop;\n        didMove = didMove || Math.abs(delta) > 2;\n        const lineDelta = Math.round(delta / editor.getOption(65 /* EditorOption.lineHeight */));\n        const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n        this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n      });\n      const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n        if (!didMove) {\n          this._unchangedRegion.showMoreAbove(20, undefined);\n        }\n        this._nodes.top.classList.toggle('dragging', false);\n        this._nodes.root.classList.toggle('dragging', false);\n        this._unchangedRegion.isDragged.set(false, undefined);\n        mouseMoveListener.dispose();\n        mouseUpListener.dispose();\n      });\n    }));\n    this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n      if (e.button !== 0) {\n        return;\n      }\n      this._nodes.bottom.classList.toggle('dragging', true);\n      this._nodes.root.classList.toggle('dragging', true);\n      e.preventDefault();\n      const startTop = e.clientY;\n      let didMove = false;\n      const cur = this._unchangedRegion.visibleLineCountBottom.get();\n      this._unchangedRegion.isDragged.set(true, undefined);\n      const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n        const currentTop = e.clientY;\n        const delta = currentTop - startTop;\n        didMove = didMove || Math.abs(delta) > 2;\n        const lineDelta = Math.round(delta / editor.getOption(65 /* EditorOption.lineHeight */));\n        const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n        const top = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n        this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n        const top2 = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n        editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n      });\n      const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n        this._unchangedRegion.isDragged.set(false, undefined);\n        if (!didMove) {\n          const top = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n          this._unchangedRegion.showMoreBelow(20, undefined);\n          const top2 = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n          editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n        }\n        this._nodes.bottom.classList.toggle('dragging', false);\n        this._nodes.root.classList.toggle('dragging', false);\n        mouseMoveListener.dispose();\n        mouseUpListener.dispose();\n      });\n    }));\n    this._register(autorun('update labels', reader => {\n      const children = [];\n      if (!this.hide && true) {\n        const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n        const linesHiddenText = `${lineCount} Hidden Lines`;\n        children.push($('span', {\n          title: linesHiddenText\n        }, linesHiddenText));\n      }\n      // TODO@hediet implement breadcrumbs for collapsed regions\n      /*\n      if (_unchangedRegion.originalLineNumber === 48) {\n          children.push($('span', undefined, '\\u00a0|\\u00a0'));\n          children.push($('span', { title: 'test' }, ...renderLabelWithIcons('$(symbol-class) DiffEditorWidget2')));\n      } else if (_unchangedRegion.originalLineNumber === 88) {\n          children.push($('span', undefined, '\\u00a0|\\u00a0'));\n          children.push($('span', { title: 'test' }, ...renderLabelWithIcons('$(symbol-constructor) constructor')));\n      }\n      */\n      reset(this._nodes.others, ...children);\n    }));\n  }\n}","map":{"version":3,"names":["$","addDisposableListener","h","reset","renderLabelWithIcons","Codicon","MarkdownString","Disposable","observableFromEvent","transaction","autorun","autorunWithStore2","derived","derivedWithStore","ThemeIcon","isDefined","PlaceholderViewZone","ViewZoneOverlayWidget","applyObservableDecorations","applyStyle","applyViewZones","LineRange","Position","Range","localize","UnchangedRangesFeature","isUpdatingViewZones","_isUpdatingViewZones","constructor","_editors","_diffModel","_options","_register","original","onDidChangeCursorPosition","e","reason","m","get","tx","s","getSelections","ensureOriginalLineIsVisible","getStartPosition","lineNumber","getEndPosition","modified","ensureModifiedLineIsVisible","unchangedRegions","map","reader","_a","_b","diff","read","mappings","length","viewZones","store","origViewZones","modViewZones","sideBySide","renderSideBySide","curUnchangedRegions","r","shouldHideControls","d","getHiddenOriginalRange","startLineNumber","origVz","push","add","CollapsedCodeOverlayWidget","getHiddenModifiedRange","modViewZone","unchangedLinesDecoration","description","className","isWholeLine","unchangedLinesDecorationShow","glyphMarginHoverMessage","undefined","isTrusted","supportThemeIcons","appendMarkdown","glyphMarginClassName","asClassName","fold","zIndex","result","range","originalRange","toInclusiveRange","options","fromPositions","originalLineNumber","modifiedRange","ofLength","modifiedLineNumber","v","setHiddenAreas","filter","onMouseUp","event","rightButton","target","position","element","includes","model","region","find","setState","stopPropagation","preventDefault","_editor","_viewZone","_unchangedRegion","hide","root","_nodes","title","style","display","justifyContent","alignItems","role","onclick","showAll","appendChild","layoutInfo","onDidLayoutChange","getLayoutInfo","first","width","l","contentLeft","editor","top","button","classList","toggle","startTop","clientY","didMove","cur","visibleLineCountTop","isDragged","set","mouseMoveListener","window","currentTop","delta","Math","abs","lineDelta","round","getOption","newVal","max","min","getMaxVisibleLineCountTop","mouseUpListener","showMoreAbove","dispose","bottom","visibleLineCountBottom","getMaxVisibleLineCountBottom","getTopForLineNumber","endLineNumberExclusive","top2","setScrollTop","getScrollTop","showMoreBelow","children","lineCount","linesHiddenText","others"],"sources":["D:/code/java/program/oj/code/yuoj-frontend-master/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/unchangedRanges.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, h, reset } from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { observableFromEvent, transaction } from '../../../../base/common/observable.js';\nimport { autorun, autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { derived, derivedWithStore } from '../../../../base/common/observableImpl/derived.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle, applyViewZones } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class UnchangedRangesFeature extends Disposable {\n    get isUpdatingViewZones() { return this._isUpdatingViewZones; }\n    constructor(_editors, _diffModel, _options) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._isUpdatingViewZones = false;\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.original.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.modified.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        const unchangedRegions = this._diffModel.map((m, reader) => { var _a, _b; return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : []; });\n        const viewZones = derivedWithStore('view zones', (reader, store) => {\n            const origViewZones = [];\n            const modViewZones = [];\n            const sideBySide = this._options.renderSideBySide.read(reader);\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    continue;\n                }\n                {\n                    const d = derived('hiddenOriginalRangeStart', reader => r.getHiddenOriginalRange(reader).startLineNumber - 1);\n                    const origVz = new PlaceholderViewZone(d, 24);\n                    origViewZones.push(origVz);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, !sideBySide));\n                }\n                {\n                    const d = derived('hiddenModifiedRangeStart', reader => r.getHiddenModifiedRange(reader).startLineNumber - 1);\n                    const modViewZone = new PlaceholderViewZone(d, 24);\n                    modViewZones.push(modViewZone);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, false));\n                }\n            }\n            return { origViewZones, modViewZones, };\n        });\n        const unchangedLinesDecoration = {\n            description: 'unchanged lines',\n            className: 'diff-unchanged-lines',\n            isWholeLine: true,\n        };\n        const unchangedLinesDecorationShow = {\n            description: 'Fold Unchanged',\n            glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true }).appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n            glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n            zIndex: 10001,\n        };\n        this._register(applyObservableDecorations(this._editors.original, derived('decorations', (reader) => {\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.originalRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n                        options: unchangedLinesDecorationShow\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyObservableDecorations(this._editors.modified, derived('decorations', (reader) => {\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.modifiedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\n                        options: unchangedLinesDecorationShow\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyViewZones(this._editors.original, viewZones.map(v => v.origViewZones), v => this._isUpdatingViewZones = v));\n        this._register(applyViewZones(this._editors.modified, viewZones.map(v => v.modViewZones), v => this._isUpdatingViewZones = v));\n        this._register(autorunWithStore2('update folded unchanged regions', (reader, store) => {\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n            this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n        }));\n        this._register(this._editors.modified.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.modifiedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.setState(0, 0, undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n        this._register(this._editors.original.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.originalRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.setState(0, 0, undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n    }\n}\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _unchangedRegion, hide) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._unchangedRegion = _unchangedRegion;\n        this.hide = hide;\n        this._nodes = h('div.diff-hidden-lines', [\n            h('div.top@top', { title: 'Click or drag to show more above' }),\n            h('div.center@content', { style: { display: 'flex' } }, [\n                h('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }, [$('a', { title: 'Show all', role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } }, ...renderLabelWithIcons('$(unfold)'))]),\n                h('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n            ]),\n            h('div.bottom@bottom', { title: 'Click or drag to show more below', role: 'button' }),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        if (!this.hide) {\n            this._register(applyStyle(this._nodes.first, { width: layoutInfo.map((l) => l.contentLeft) }));\n        }\n        else {\n            reset(this._nodes.first);\n        }\n        const editor = this._editor;\n        this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.top.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountTop.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(65 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n                this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                if (!didMove) {\n                    this._unchangedRegion.showMoreAbove(20, undefined);\n                }\n                this._nodes.top.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                this._unchangedRegion.isDragged.set(false, undefined);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.bottom.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountBottom.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(65 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n                const top = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n                const top2 = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                this._unchangedRegion.isDragged.set(false, undefined);\n                if (!didMove) {\n                    const top = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                    this._unchangedRegion.showMoreBelow(20, undefined);\n                    const top2 = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                    editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n                }\n                this._nodes.bottom.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(autorun('update labels', (reader) => {\n            const children = [];\n            if (!this.hide && true) {\n                const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n                const linesHiddenText = `${lineCount} Hidden Lines`;\n                children.push($('span', { title: linesHiddenText }, linesHiddenText));\n            }\n            // TODO@hediet implement breadcrumbs for collapsed regions\n            /*\n            if (_unchangedRegion.originalLineNumber === 48) {\n                children.push($('span', undefined, '\\u00a0|\\u00a0'));\n                children.push($('span', { title: 'test' }, ...renderLabelWithIcons('$(symbol-class) DiffEditorWidget2')));\n            } else if (_unchangedRegion.originalLineNumber === 88) {\n                children.push($('span', undefined, '\\u00a0|\\u00a0'));\n                children.push($('span', { title: 'test' }, ...renderLabelWithIcons('$(symbol-constructor) constructor')));\n            }\n            */\n            reset(this._nodes.others, ...children);\n        }));\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}