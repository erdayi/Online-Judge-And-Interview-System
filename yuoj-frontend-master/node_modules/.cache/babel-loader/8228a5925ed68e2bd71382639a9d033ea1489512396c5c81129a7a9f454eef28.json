{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { localize } from '../../../nls.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nconst accessibleDiffViewerCategory = {\n  value: localize('accessibleDiffViewer', 'Accessible Diff Viewer'),\n  original: 'Accessible Diff Viewer'\n};\nexport class AccessibleDiffViewerNext extends Action2 {\n  constructor() {\n    super({\n      id: AccessibleDiffViewerNext.id,\n      title: {\n        value: localize('editor.action.accessibleDiffViewer.next', \"Go to Next Difference\"),\n        original: 'Go to Next Difference'\n      },\n      category: accessibleDiffViewerCategory,\n      precondition: ContextKeyExpr.has('isInDiffEditor'),\n      keybinding: {\n        primary: 65 /* KeyCode.F7 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n\n      f1: true\n    });\n  }\n  run(accessor) {\n    const diffEditor = findFocusedDiffEditor(accessor);\n    diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerNext();\n  }\n}\nAccessibleDiffViewerNext.id = 'editor.action.accessibleDiffViewer.next';\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n  command: {\n    id: AccessibleDiffViewerNext.id,\n    title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\")\n  },\n  order: 10,\n  group: '2_diff',\n  when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor'))\n});\nexport class AccessibleDiffViewerPrev extends Action2 {\n  constructor() {\n    super({\n      id: AccessibleDiffViewerPrev.id,\n      title: {\n        value: localize('editor.action.accessibleDiffViewer.prev', \"Go to Previous Difference\"),\n        original: 'Go to Previous Difference'\n      },\n      category: accessibleDiffViewerCategory,\n      precondition: ContextKeyExpr.has('isInDiffEditor'),\n      keybinding: {\n        primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n\n      f1: true\n    });\n  }\n  run(accessor) {\n    const diffEditor = findFocusedDiffEditor(accessor);\n    diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerPrev();\n  }\n}\nAccessibleDiffViewerPrev.id = 'editor.action.accessibleDiffViewer.prev';\nexport function findFocusedDiffEditor(accessor) {\n  var _a;\n  const codeEditorService = accessor.get(ICodeEditorService);\n  const diffEditors = codeEditorService.listDiffEditors();\n  const activeCodeEditor = (_a = codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : codeEditorService.getActiveCodeEditor();\n  if (!activeCodeEditor) {\n    return null;\n  }\n  for (let i = 0, len = diffEditors.length; i < len; i++) {\n    const diffEditor = diffEditors[i];\n    if (diffEditor.getModifiedEditor().getId() === activeCodeEditor.getId() || diffEditor.getOriginalEditor().getId() === activeCodeEditor.getId()) {\n      return diffEditor;\n    }\n  }\n  if (document.activeElement) {\n    for (const d of diffEditors) {\n      const container = d.getContainerDomNode();\n      if (isElementOrParentOf(container, document.activeElement)) {\n        return d;\n      }\n    }\n  }\n  return null;\n}\nfunction isElementOrParentOf(elementOrParent, element) {\n  let e = element;\n  while (e) {\n    if (e === elementOrParent) {\n      return true;\n    }\n    e = e.parentElement;\n  }\n  return false;\n}\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);","map":{"version":3,"names":["ICodeEditorService","EditorContextKeys","localize","Action2","MenuId","MenuRegistry","registerAction2","CommandsRegistry","ContextKeyExpr","accessibleDiffViewerCategory","value","original","AccessibleDiffViewerNext","constructor","id","title","category","precondition","has","keybinding","primary","weight","f1","run","accessor","diffEditor","findFocusedDiffEditor","accessibleDiffViewerNext","appendMenuItem","EditorTitle","command","order","group","when","and","accessibleDiffViewerVisible","negate","AccessibleDiffViewerPrev","accessibleDiffViewerPrev","_a","codeEditorService","get","diffEditors","listDiffEditors","activeCodeEditor","getFocusedCodeEditor","getActiveCodeEditor","i","len","length","getModifiedEditor","getId","getOriginalEditor","document","activeElement","d","container","getContainerDomNode","isElementOrParentOf","elementOrParent","element","e","parentElement","registerCommandAlias"],"sources":["D:/code/java/program/oj/code/yuoj-frontend-master/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor.contribution.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { localize } from '../../../nls.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nconst accessibleDiffViewerCategory = {\n    value: localize('accessibleDiffViewer', 'Accessible Diff Viewer'),\n    original: 'Accessible Diff Viewer',\n};\nexport class AccessibleDiffViewerNext extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerNext.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.next', \"Go to Next Difference\"), original: 'Go to Next Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerNext();\n    }\n}\nAccessibleDiffViewerNext.id = 'editor.action.accessibleDiffViewer.next';\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: AccessibleDiffViewerNext.id,\n        title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\n    },\n    order: 10,\n    group: '2_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor')),\n});\nexport class AccessibleDiffViewerPrev extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerPrev.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.prev', \"Go to Previous Difference\"), original: 'Go to Previous Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerPrev();\n    }\n}\nAccessibleDiffViewerPrev.id = 'editor.action.accessibleDiffViewer.prev';\nexport function findFocusedDiffEditor(accessor) {\n    var _a;\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const diffEditors = codeEditorService.listDiffEditors();\n    const activeCodeEditor = (_a = codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : codeEditorService.getActiveCodeEditor();\n    if (!activeCodeEditor) {\n        return null;\n    }\n    for (let i = 0, len = diffEditors.length; i < len; i++) {\n        const diffEditor = diffEditors[i];\n        if (diffEditor.getModifiedEditor().getId() === activeCodeEditor.getId() || diffEditor.getOriginalEditor().getId() === activeCodeEditor.getId()) {\n            return diffEditor;\n        }\n    }\n    if (document.activeElement) {\n        for (const d of diffEditors) {\n            const container = d.getContainerDomNode();\n            if (isElementOrParentOf(container, document.activeElement)) {\n                return d;\n            }\n        }\n    }\n    return null;\n}\nfunction isElementOrParentOf(elementOrParent, element) {\n    let e = element;\n    while (e) {\n        if (e === elementOrParent) {\n            return true;\n        }\n        e = e.parentElement;\n    }\n    return false;\n}\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}