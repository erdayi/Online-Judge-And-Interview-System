{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, keepAlive, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { subtransaction } from '../../../../base/common/observableImpl/base.js';\nimport { derivedWithStore } from '../../../../base/common/observableImpl/derived.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { applyStyle } from './utils.js';\nimport { DiffReview } from '../diffReview.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SimpleLineRangeMapping } from '../../../common/diff/linesDiffComputer.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nimport { localize } from '../../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n  constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {\n    super();\n    this._parentNode = _parentNode;\n    this._visible = _visible;\n    this._setVisible = _setVisible;\n    this._canClose = _canClose;\n    this._width = _width;\n    this._height = _height;\n    this._diffs = _diffs;\n    this._editors = _editors;\n    this._instantiationService = _instantiationService;\n    this.model = derivedWithStore('model', (reader, store) => {\n      const visible = this._visible.read(reader);\n      this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n      if (!visible) {\n        return null;\n      }\n      const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));\n      const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._editors));\n      return {\n        model,\n        view\n      };\n    });\n    this._register(keepAlive(this.model, true));\n  }\n  next() {\n    transaction(tx => {\n      const isVisible = this._visible.get();\n      this._setVisible(true, tx);\n      if (isVisible) {\n        this.model.get().model.nextGroup(tx);\n      }\n    });\n  }\n  prev() {\n    transaction(tx => {\n      this._setVisible(true, tx);\n      this.model.get().model.previousGroup(tx);\n    });\n  }\n  close() {\n    transaction(tx => {\n      this._setVisible(false, tx);\n    });\n  }\n};\nAccessibleDiffViewer = __decorate([__param(8, IInstantiationService)], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n  constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {\n    super();\n    this._diffs = _diffs;\n    this._editors = _editors;\n    this._setVisible = _setVisible;\n    this.canClose = canClose;\n    this._audioCueService = _audioCueService;\n    this._groups = observableValue('groups', []);\n    this._currentGroupIdx = observableValue('currentGroupIdx', 0);\n    this._currentElementIdx = observableValue('currentElementIdx', 0);\n    this.groups = this._groups;\n    this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n    this.currentGroupIndex = this._currentGroupIdx;\n    this.currentElement = this._currentElementIdx.map((idx, r) => {\n      var _a;\n      return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx];\n    });\n    this._register(autorun('update groups', reader => {\n      const diffs = this._diffs.read(reader);\n      if (!diffs) {\n        this._groups.set([], undefined);\n        return;\n      }\n      const groups = computeViewElementGroups(diffs, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());\n      transaction(tx => {\n        const p = this._editors.modified.getPosition();\n        if (p) {\n          const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n          if (nextGroup !== -1) {\n            this._currentGroupIdx.set(nextGroup, tx);\n          }\n        }\n        this._groups.set(groups, tx);\n      });\n    }));\n    this._register(autorun('play audio-cue for diff', reader => {\n      const currentViewItem = this.currentElement.read(reader);\n      if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n        this._audioCueService.playAudioCue(AudioCue.diffLineDeleted);\n      } else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n        this._audioCueService.playAudioCue(AudioCue.diffLineInserted);\n      }\n    }));\n    this._register(autorun('select lines in editor', reader => {\n      var _a;\n      // This ensures editor commands (like revert/stage) work\n      const currentViewItem = this.currentElement.read(reader);\n      if (currentViewItem && currentViewItem.type !== LineType.Header) {\n        const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modifiedRange.startLineNumber;\n        this._editors.modified.setSelection(Range.fromPositions(new Position(lineNumber, 1)));\n      }\n    }));\n  }\n  _goToGroupDelta(delta, tx) {\n    const groups = this.groups.get();\n    if (!groups || groups.length <= 1) {\n      return;\n    }\n    subtransaction(tx, tx => {\n      this._currentGroupIdx.set((this._currentGroupIdx.get() + groups.length + delta) % groups.length, tx);\n      this._currentElementIdx.set(0, tx);\n    });\n  }\n  nextGroup(tx) {\n    this._goToGroupDelta(1, tx);\n  }\n  previousGroup(tx) {\n    this._goToGroupDelta(-1, tx);\n  }\n  _goToLineDelta(delta) {\n    const group = this.currentGroup.get();\n    if (!group || group.lines.length <= 1) {\n      return;\n    }\n    transaction(tx => {\n      this._currentElementIdx.set((this._currentElementIdx.get() + group.lines.length + delta) % group.lines.length, tx);\n    });\n  }\n  goToNextLine() {\n    this._goToLineDelta(1);\n  }\n  goToPreviousLine() {\n    this._goToLineDelta(-1);\n  }\n  goToLine(line) {\n    const group = this.currentGroup.get();\n    if (!group) {\n      return;\n    }\n    const idx = group.lines.indexOf(line);\n    if (idx === -1) {\n      return;\n    }\n    transaction(tx => {\n      this._currentElementIdx.set(idx, tx);\n    });\n  }\n  revealCurrentElementInEditor() {\n    this._setVisible(false, undefined);\n    const curElem = this.currentElement.get();\n    if (curElem) {\n      if (curElem.type === LineType.Deleted) {\n        this._editors.original.setSelection(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n        this._editors.original.revealLine(curElem.originalLineNumber);\n        this._editors.original.focus();\n      } else {\n        if (curElem.type !== LineType.Header) {\n          this._editors.modified.setSelection(Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)));\n          this._editors.modified.revealLine(curElem.modifiedLineNumber);\n        }\n        this._editors.modified.focus();\n      }\n    }\n  }\n  close() {\n    this._setVisible(false, undefined);\n    this._editors.modified.focus();\n  }\n};\nViewModel = __decorate([__param(4, IAudioCueService)], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n  const result = [];\n  for (const g of group(diffs, (a, b) => b.modifiedRange.startLineNumber - a.modifiedRange.endLineNumberExclusive < 2 * viewElementGroupLineMargin)) {\n    const viewElements = [];\n    viewElements.push(new HeaderViewElement());\n    const origFullRange = new LineRange(Math.max(1, g[0].originalRange.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].originalRange.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n    const modifiedFullRange = new LineRange(Math.max(1, g[0].modifiedRange.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modifiedRange.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n    forEachAdjacentItems(g, (a, b) => {\n      const origRange = new LineRange(a ? a.originalRange.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.originalRange.startLineNumber : origFullRange.endLineNumberExclusive);\n      const modifiedRange = new LineRange(a ? a.modifiedRange.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modifiedRange.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n      origRange.forEach(origLineNumber => {\n        viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n      });\n      if (b) {\n        b.originalRange.forEach(origLineNumber => {\n          viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n        });\n        b.modifiedRange.forEach(modifiedLineNumber => {\n          viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n        });\n      }\n    });\n    const modifiedRange = g[0].modifiedRange.join(g[g.length - 1].modifiedRange);\n    const originalRange = g[0].originalRange.join(g[g.length - 1].originalRange);\n    result.push(new ViewElementGroup(new SimpleLineRangeMapping(modifiedRange, originalRange), viewElements));\n  }\n  return result;\n}\nvar LineType;\n(function (LineType) {\n  LineType[LineType[\"Header\"] = 0] = \"Header\";\n  LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n  LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n  LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n  constructor(range, lines) {\n    this.range = range;\n    this.lines = lines;\n  }\n}\nclass HeaderViewElement {\n  constructor() {\n    this.type = LineType.Header;\n  }\n}\nclass DeletedLineViewElement {\n  constructor(diff, originalLineNumber) {\n    this.diff = diff;\n    this.originalLineNumber = originalLineNumber;\n    this.type = LineType.Deleted;\n    this.modifiedLineNumber = undefined;\n  }\n}\nclass AddedLineViewElement {\n  constructor(diff, modifiedLineNumber) {\n    this.diff = diff;\n    this.modifiedLineNumber = modifiedLineNumber;\n    this.type = LineType.Added;\n    this.originalLineNumber = undefined;\n  }\n}\nclass UnchangedLineViewElement {\n  constructor(originalLineNumber, modifiedLineNumber) {\n    this.originalLineNumber = originalLineNumber;\n    this.modifiedLineNumber = modifiedLineNumber;\n    this.type = LineType.Unchanged;\n  }\n}\nlet View = class View extends Disposable {\n  constructor(_element, _model, _width, _height, _editors, _languageService) {\n    super();\n    this._element = _element;\n    this._model = _model;\n    this._width = _width;\n    this._height = _height;\n    this._editors = _editors;\n    this._languageService = _languageService;\n    this.domNode = this._element;\n    this.domNode.className = 'diff-review monaco-editor-background';\n    const actionBarContainer = document.createElement('div');\n    actionBarContainer.className = 'diff-review-actions';\n    this._actionBar = this._register(new ActionBar(actionBarContainer));\n    this._register(autorun('update actions', reader => {\n      this._actionBar.clear();\n      if (this._model.canClose.read(reader)) {\n        this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, () => __awaiter(this, void 0, void 0, function* () {\n          return _model.close();\n        })), {\n          label: false,\n          icon: true\n        });\n      }\n    }));\n    this._content = document.createElement('div');\n    this._content.className = 'diff-review-content';\n    this._content.setAttribute('role', 'code');\n    this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n    reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n    this._register(toDisposable(() => {\n      reset(this.domNode);\n    }));\n    this._register(applyStyle(this.domNode, {\n      width: this._width,\n      height: this._height\n    }));\n    this._register(applyStyle(this._content, {\n      width: this._width,\n      height: this._height\n    }));\n    this._register(autorunWithStore2('render', (reader, store) => {\n      this._model.currentGroup.read(reader);\n      this._render(store);\n    }));\n    // TODO@hediet use commands\n    this._register(addStandardDisposableListener(this.domNode, 'keydown', e => {\n      if (e.equals(18 /* KeyCode.DownArrow */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */) || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n        e.preventDefault();\n        this._model.goToNextLine();\n      }\n      if (e.equals(16 /* KeyCode.UpArrow */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */) || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n        e.preventDefault();\n        this._model.goToPreviousLine();\n      }\n      if (e.equals(9 /* KeyCode.Escape */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */) || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */) || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n        e.preventDefault();\n        this._model.close();\n      }\n      if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n        e.preventDefault();\n        this._model.revealCurrentElementInEditor();\n      }\n    }));\n  }\n  _render(store) {\n    const originalOptions = this._editors.original.getOptions();\n    const modifiedOptions = this._editors.modified.getOptions();\n    const container = document.createElement('div');\n    container.className = 'diff-review-table';\n    container.setAttribute('role', 'list');\n    container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n    applyFontInfo(container, modifiedOptions.get(49 /* EditorOption.fontInfo */));\n    reset(this._content, container);\n    const originalModel = this._editors.original.getModel();\n    const modifiedModel = this._editors.modified.getModel();\n    if (!originalModel || !modifiedModel) {\n      return;\n    }\n    const originalModelOpts = originalModel.getOptions();\n    const modifiedModelOpts = modifiedModel.getOptions();\n    const lineHeight = modifiedOptions.get(65 /* EditorOption.lineHeight */);\n    const group = this._model.currentGroup.get();\n    for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n      if (!group) {\n        break;\n      }\n      let row;\n      if (viewItem.type === LineType.Header) {\n        const header = document.createElement('div');\n        header.className = 'diff-review-row';\n        header.setAttribute('role', 'listitem');\n        const r = group.range;\n        const diffIndex = this._model.currentGroupIndex.get();\n        const diffsLength = this._model.groups.get().length;\n        const getAriaLines = lines => lines === 0 ? localize('no_lines_changed', \"no lines changed\") : lines === 1 ? localize('one_line_changed', \"1 line changed\") : localize('more_lines_changed', \"{0} lines changed\", lines);\n        const originalChangedLinesCntAria = getAriaLines(r.original.length);\n        const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n        header.setAttribute('aria-label', localize({\n          key: 'header',\n          comment: ['This is the ARIA label for a git diff header.', 'A git diff header looks like this: @@ -154,12 +159,39 @@.', 'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.', 'Variables 0 and 1 refer to the diff index out of total number of diffs.', 'Variables 2 and 4 will be numbers (a line number).', 'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.']\n        }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", diffIndex + 1, diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell diff-review-summary';\n        // e.g.: `1/10: @@ -504,7 +517,7 @@`\n        cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n        header.appendChild(cell);\n        row = header;\n      } else {\n        row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n      }\n      container.appendChild(row);\n      const isSelectedObs = derived('isSelected', reader => this._model.currentElement.read(reader) === viewItem);\n      store.add(autorun('update tab index', reader => {\n        const isSelected = isSelectedObs.read(reader);\n        row.tabIndex = isSelected ? 0 : -1;\n        if (isSelected) {\n          row.focus();\n        }\n      }));\n      store.add(addDisposableListener(row, 'focus', () => {\n        this._model.goToLine(viewItem);\n      }));\n    }\n    this._scrollbar.scanDomNode();\n  }\n  _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n    const originalLayoutInfo = originalOptions.get(142 /* EditorOption.layoutInfo */);\n    const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n    const modifiedLayoutInfo = modifiedOptions.get(142 /* EditorOption.layoutInfo */);\n    const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n    let rowClassName = 'diff-review-row';\n    let lineNumbersExtraClassName = '';\n    const spacerClassName = 'diff-review-spacer';\n    let spacerIcon = null;\n    switch (item.type) {\n      case LineType.Added:\n        rowClassName = 'diff-review-row line-insert';\n        lineNumbersExtraClassName = ' char-insert';\n        spacerIcon = accessibleDiffViewerInsertIcon;\n        break;\n      case LineType.Deleted:\n        rowClassName = 'diff-review-row line-delete';\n        lineNumbersExtraClassName = ' char-delete';\n        spacerIcon = accessibleDiffViewerRemoveIcon;\n        break;\n    }\n    const row = document.createElement('div');\n    row.style.minWidth = width + 'px';\n    row.className = rowClassName;\n    row.setAttribute('role', 'listitem');\n    row.ariaLevel = '';\n    const cell = document.createElement('div');\n    cell.className = 'diff-review-cell';\n    cell.style.height = `${lineHeight}px`;\n    row.appendChild(cell);\n    const originalLineNumber = document.createElement('span');\n    originalLineNumber.style.width = originalLineNumbersWidth + 'px';\n    originalLineNumber.style.minWidth = originalLineNumbersWidth + 'px';\n    originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n    if (item.originalLineNumber !== undefined) {\n      originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n    } else {\n      originalLineNumber.innerText = '\\u00a0';\n    }\n    cell.appendChild(originalLineNumber);\n    const modifiedLineNumber = document.createElement('span');\n    modifiedLineNumber.style.width = modifiedLineNumbersWidth + 'px';\n    modifiedLineNumber.style.minWidth = modifiedLineNumbersWidth + 'px';\n    modifiedLineNumber.style.paddingRight = '10px';\n    modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n    if (item.modifiedLineNumber !== undefined) {\n      modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n    } else {\n      modifiedLineNumber.innerText = '\\u00a0';\n    }\n    cell.appendChild(modifiedLineNumber);\n    const spacer = document.createElement('span');\n    spacer.className = spacerClassName;\n    if (spacerIcon) {\n      const spacerCodicon = document.createElement('span');\n      spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n      spacerCodicon.innerText = '\\u00a0\\u00a0';\n      spacer.appendChild(spacerCodicon);\n    } else {\n      spacer.innerText = '\\u00a0\\u00a0';\n    }\n    cell.appendChild(spacer);\n    let lineContent;\n    if (item.modifiedLineNumber !== undefined) {\n      let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n      if (DiffReview._ttPolicy) {\n        html = DiffReview._ttPolicy.createHTML(html);\n      }\n      cell.insertAdjacentHTML('beforeend', html);\n      lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n    } else {\n      let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n      if (DiffReview._ttPolicy) {\n        html = DiffReview._ttPolicy.createHTML(html);\n      }\n      cell.insertAdjacentHTML('beforeend', html);\n      lineContent = originalModel.getLineContent(item.originalLineNumber);\n    }\n    if (lineContent.length === 0) {\n      lineContent = localize('blankLine', \"blank\");\n    }\n    let ariaLabel = '';\n    switch (item.type) {\n      case LineType.Unchanged:\n        if (item.originalLineNumber === item.modifiedLineNumber) {\n          ariaLabel = localize({\n            key: 'unchangedLine',\n            comment: ['The placeholders are contents of the line and should not be translated.']\n          }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n        } else {\n          ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n        }\n        break;\n      case LineType.Added:\n        ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n        break;\n      case LineType.Deleted:\n        ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n        break;\n    }\n    row.setAttribute('aria-label', ariaLabel);\n    return row;\n  }\n  _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n    const lineContent = model.getLineContent(lineNumber);\n    const fontInfo = options.get(49 /* EditorOption.fontInfo */);\n    const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n    const r = renderViewLine2(new RenderLineInput(fontInfo.isMonospace && !options.get(32 /* EditorOption.disableMonospaceOptimizations */), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(115 /* EditorOption.stopRenderingLineAfter */), options.get(97 /* EditorOption.renderWhitespace */), options.get(92 /* EditorOption.renderControlCharacters */), options.get(50 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n    return r.html;\n  }\n};\nView = __decorate([__param(5, ILanguageService)], View);\nfunction forEachAdjacentItems(items, callback) {\n  let last;\n  for (const item of items) {\n    callback(last, item);\n    last = item;\n  }\n  callback(last, undefined);\n}\nfunction* group(items, shouldBeGrouped) {\n  let currentGroup;\n  let last;\n  for (const item of items) {\n    if (last !== undefined && shouldBeGrouped(last, item)) {\n      currentGroup.push(item);\n    } else {\n      if (currentGroup) {\n        yield currentGroup;\n      }\n      currentGroup = [item];\n    }\n    last = item;\n  }\n  if (currentGroup) {\n    yield currentGroup;\n  }\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","addDisposableListener","addStandardDisposableListener","reset","ActionBar","DomScrollableElement","Action","Codicon","Disposable","toDisposable","autorun","derived","keepAlive","observableValue","transaction","autorunWithStore2","subtransaction","derivedWithStore","ThemeIcon","applyFontInfo","applyStyle","DiffReview","EditorFontLigatures","LineRange","Position","Range","SimpleLineRangeMapping","ILanguageService","LineTokens","RenderLineInput","renderViewLine2","ViewLineRenderingData","localize","AudioCue","IAudioCueService","IInstantiationService","registerIcon","accessibleDiffViewerInsertIcon","add","accessibleDiffViewerRemoveIcon","remove","accessibleDiffViewerCloseIcon","close","AccessibleDiffViewer","constructor","_parentNode","_visible","_setVisible","_canClose","_width","_height","_diffs","_editors","_instantiationService","model","reader","store","visible","read","style","visibility","createInstance","ViewModel","view","View","_register","tx","isVisible","get","nextGroup","prev","previousGroup","canClose","_audioCueService","_groups","_currentGroupIdx","_currentElementIdx","groups","currentGroup","map","idx","currentGroupIndex","currentElement","_a","lines","diffs","set","undefined","computeViewElementGroups","original","getModel","getLineCount","modified","p","getPosition","findIndex","g","lineNumber","range","endLineNumberExclusive","currentViewItem","type","LineType","Deleted","playAudioCue","diffLineDeleted","Added","diffLineInserted","Header","modifiedLineNumber","diff","modifiedRange","startLineNumber","setSelection","fromPositions","_goToGroupDelta","delta","_goToLineDelta","group","goToNextLine","goToPreviousLine","goToLine","line","indexOf","revealCurrentElementInEditor","curElem","originalLineNumber","revealLine","focus","viewElementGroupLineMargin","originalLineCount","modifiedLineCount","a","b","viewElements","push","HeaderViewElement","origFullRange","Math","max","originalRange","min","modifiedFullRange","forEachAdjacentItems","origRange","forEach","origLineNumber","UnchangedLineViewElement","DeletedLineViewElement","AddedLineViewElement","join","ViewElementGroup","Unchanged","_element","_model","_languageService","domNode","className","actionBarContainer","document","createElement","_actionBar","clear","asClassName","label","icon","_content","setAttribute","_scrollbar","getDomNode","width","height","_render","equals","preventDefault","originalOptions","getOptions","modifiedOptions","container","originalModel","modifiedModel","originalModelOpts","modifiedModelOpts","lineHeight","viewItem","row","header","diffIndex","diffsLength","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","cell","appendChild","createTextNode","_createRow","isSelectedObs","isSelected","tabIndex","scanDomNode","item","originalLayoutInfo","originalLineNumbersWidth","glyphMarginWidth","lineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","rowClassName","lineNumbersExtraClassName","spacerClassName","spacerIcon","minWidth","ariaLevel","String","innerText","paddingRight","spacer","spacerCodicon","lineContent","html","_getLineHtml","tabSize","languageIdCodec","_ttPolicy","createHTML","insertAdjacentHTML","getLineContent","ariaLabel","options","fontInfo","lineTokens","createEmpty","isBasicASCII","mightContainNonBasicASCII","containsRTL","mightContainRTL","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","OFF","items","callback","last","shouldBeGrouped"],"sources":["D:/code/java/program/oj/code/yuoj-frontend-master/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/accessibleDiffViewer.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, keepAlive, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { subtransaction } from '../../../../base/common/observableImpl/base.js';\nimport { derivedWithStore } from '../../../../base/common/observableImpl/derived.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { applyStyle } from './utils.js';\nimport { DiffReview } from '../diffReview.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SimpleLineRangeMapping } from '../../../common/diff/linesDiffComputer.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nimport { localize } from '../../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._instantiationService = _instantiationService;\n        this.model = derivedWithStore('model', (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._editors));\n            return {\n                model,\n                view\n            };\n        });\n        this._register(keepAlive(this.model, true));\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this.model.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this.model.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {\n        super();\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._audioCueService = _audioCueService;\n        this._groups = observableValue('groups', []);\n        this._currentGroupIdx = observableValue('currentGroupIdx', 0);\n        this._currentElementIdx = observableValue('currentElementIdx', 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun('update groups', reader => {\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());\n            transaction(tx => {\n                const p = this._editors.modified.getPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun('play audio-cue for diff', reader => {\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineDeleted);\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineInserted);\n            }\n        }));\n        this._register(autorun('select lines in editor', reader => {\n            var _a;\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modifiedRange.startLineNumber;\n                this._editors.modified.setSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set((this._currentGroupIdx.get() + groups.length + delta) % groups.length, tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set((this._currentElementIdx.get() + group.lines.length + delta) % group.lines.length, tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._editors.original.setSelection(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n                this._editors.original.revealLine(curElem.originalLineNumber);\n                this._editors.original.focus();\n            }\n            else {\n                if (curElem.type !== LineType.Header) {\n                    this._editors.modified.setSelection(Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)));\n                    this._editors.modified.revealLine(curElem.modifiedLineNumber);\n                }\n                this._editors.modified.focus();\n            }\n        }\n    }\n    close() {\n        this._setVisible(false, undefined);\n        this._editors.modified.focus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAudioCueService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of group(diffs, (a, b) => (b.modifiedRange.startLineNumber - a.modifiedRange.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].originalRange.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].originalRange.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modifiedRange.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modifiedRange.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacentItems(g, (a, b) => {\n            const origRange = new LineRange(a ? a.originalRange.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.originalRange.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modifiedRange.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modifiedRange.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.originalRange.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modifiedRange.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modifiedRange.join(g[g.length - 1].modifiedRange);\n        const originalRange = g[0].originalRange.join(g[g.length - 1].originalRange);\n        result.push(new ViewElementGroup(new SimpleLineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _editors, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._editors = _editors;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun('update actions', reader => {\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, () => __awaiter(this, void 0, void 0, function* () { return _model.close(); })), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore2('render', (reader, store) => {\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._editors.original.getOptions();\n        const modifiedOptions = this._editors.modified.getOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(49 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._editors.original.getModel();\n        const modifiedModel = this._editors.modified.getModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(65 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived('isSelected', reader => this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun('update tab index', reader => {\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(142 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(142 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (DiffReview._ttPolicy) {\n                html = DiffReview._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (DiffReview._ttPolicy) {\n                html = DiffReview._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(49 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(32 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(115 /* EditorOption.stopRenderingLineAfter */), options.get(97 /* EditorOption.renderWhitespace */), options.get(92 /* EditorOption.renderControlCharacters */), options.get(50 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\nfunction forEachAdjacentItems(items, callback) {\n    let last;\n    for (const item of items) {\n        callback(last, item);\n        last = item;\n    }\n    callback(last, undefined);\n}\nfunction* group(items, shouldBeGrouped) {\n    let currentGroup;\n    let last;\n    for (const item of items) {\n        if (last !== undefined && shouldBeGrouped(last, item)) {\n            currentGroup.push(item);\n        }\n        else {\n            if (currentGroup) {\n                yield currentGroup;\n            }\n            currentGroup = [item];\n        }\n        last = item;\n    }\n    if (currentGroup) {\n        yield currentGroup;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}