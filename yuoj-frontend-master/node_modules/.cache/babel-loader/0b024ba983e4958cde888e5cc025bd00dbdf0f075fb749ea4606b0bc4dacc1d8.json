{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString, retrieve3 } from 'zrender/lib/core/util.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport View from '../../coord/View.js';\nvar SankeyPathShape = /** @class */function () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n  return SankeyPathShape;\n}();\nvar SankeyPath = /** @class */function (_super) {\n  __extends(SankeyPath, _super);\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n    ctx.closePath();\n  };\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  return SankeyPath;\n}(graphic.Path);\nvar SankeyView = /** @class */function (_super) {\n  __extends(SankeyView, _super);\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SankeyView.type;\n    _this._mainGroup = new graphic.Group();\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n  SankeyView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var mainGroup = this._mainGroup;\n    var layoutInfo = seriesModel.layoutInfo;\n    // view width\n    var width = layoutInfo.width;\n    // view height\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    mainGroup.removeAll();\n    mainGroup.x = layoutInfo.x;\n    mainGroup.y = layoutInfo.y;\n    this._updateViewCoordSys(seriesModel, api);\n    roamHelper.updateController(seriesModel, api, mainGroup, this._controller, this._controllerHost, null);\n    // generate a bezire Curve for each edge\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle());\n      // Special color, use source node color or target node color\n      applyCurveStyle(curve.style, orient, edge);\n      var defaultEdgeLabelText = \"\" + edgeModel.get('value');\n      var edgeLabelStateModels = getLabelStatesModels(edgeModel, 'edgeLabel');\n      setLabelStyle(curve, edgeLabelStateModels, {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName, dataType, labelDimIndex, formatter, extendParams) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'edge', labelDimIndex,\n            // ensure edgeLabel formatter is provided\n            // to prevent the inheritance from `label.formatter` of the series\n            retrieve3(formatter, edgeLabelStateModels.normal && edgeLabelStateModels.normal.get('formatter'), defaultEdgeLabelText), extendParams);\n          }\n        },\n        labelDataIndex: edge.dataIndex,\n        defaultText: defaultEdgeLabelText\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        var style = model.getItemStyle();\n        applyCurveStyle(style, orient, edge);\n        return style;\n      });\n      mainGroup.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus === 'trajectory' ? edge.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    // Generate a rect for each node\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy,\n          r: borderRadius\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'node');\n          }\n        },\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      mainGroup.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus === 'trajectory' ? node.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      mainGroup.setClipPath(createGridClipShape(mainGroup.getBoundingRect(), seriesModel, function () {\n        mainGroup.removeClipPath();\n      }));\n    }\n    this._data = seriesModel.getData();\n  };\n  SankeyView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  SankeyView.prototype._updateViewCoordSys = function (seriesModel, api) {\n    var layoutInfo = seriesModel.layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var viewCoordSys = seriesModel.coordinateSystem = new View(null, {\n      api: api,\n      ecModel: seriesModel.ecModel\n    });\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(0, 0, width, height);\n    viewCoordSys.setCenter(seriesModel.get('center'));\n    viewCoordSys.setZoom(seriesModel.get('zoom'));\n    this._controllerHost.target.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n  };\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView);\n/**\n * Special color, use source node color or target node color\n * @param curveProps curve's style to parse\n * @param orient direction\n * @param edge current curve data\n */\nfunction applyCurveStyle(curveProps, orient, edge) {\n  switch (curveProps.fill) {\n    case 'source':\n      curveProps.fill = edge.node1.getVisual('color');\n      curveProps.decal = edge.node1.getVisual('style').decal;\n      break;\n    case 'target':\n      curveProps.fill = edge.node2.getVisual('color');\n      curveProps.decal = edge.node2.getVisual('style').decal;\n      break;\n    case 'gradient':\n      var sourceColor = edge.node1.getVisual('color');\n      var targetColor = edge.node2.getVisual('color');\n      if (isString(sourceColor) && isString(targetColor)) {\n        curveProps.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n          color: sourceColor,\n          offset: 0\n        }, {\n          color: targetColor,\n          offset: 1\n        }]);\n      }\n  }\n}\n// Add animation to the view\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nexport default SankeyView;","map":{"version":3,"names":["__extends","graphic","enterEmphasis","leaveEmphasis","toggleHoverEmphasis","setStatesStylesFromModel","ChartView","setLabelStyle","getLabelStatesModels","getECData","isString","retrieve3","RoamController","roamHelper","View","SankeyPathShape","x1","y1","x2","y2","cpx1","cpy1","cpx2","cpy2","extent","SankeyPath","_super","opts","call","prototype","getDefaultShape","buildPath","ctx","shape","moveTo","bezierCurveTo","orient","lineTo","closePath","highlight","downplay","Path","SankeyView","_this","apply","arguments","type","_mainGroup","Group","_focusAdjacencyDisabled","init","ecModel","api","_controller","getZr","_controllerHost","target","group","add","render","seriesModel","sankeyView","graph","getGraph","mainGroup","layoutInfo","width","height","nodeData","getData","edgeData","get","_model","removeAll","x","y","_updateViewCoordSys","updateController","eachEdge","edge","curve","ecData","dataIndex","seriesIndex","dataType","edgeModel","getModel","lineStyleModel","curvature","n1Layout","node1","getLayout","node1Model","dragX1","dragY1","n2Layout","node2","node2Model","dragX2","dragY2","edgeLayout","Math","max","dy","sy","ty","dx","setShape","useStyle","getItemStyle","applyCurveStyle","style","defaultEdgeLabelText","edgeLabelStateModels","labelFetcher","getFormattedLabel","stateName","labelDimIndex","formatter","extendParams","normal","labelDataIndex","defaultText","setTextConfig","position","emphasisModel","model","setItemGraphicEl","focus","getAdjacentDataIndices","getTrajectoryDataIndices","eachNode","node","layout","itemModel","dragX","dragY","borderRadius","rect","Rect","r","z2","id","disableLabelAnimation","setStyle","getVisual","decal","eachItemGraphicEl","el","getItemModel","drift","dirty","dispatchAction","seriesId","getRawIndex","localX","localY","ondragend","draggable","cursor","_data","isAnimationEnabled","setClipPath","createGridClipShape","getBoundingRect","removeClipPath","dispose","viewCoordSys","coordinateSystem","zoomLimit","setBoundingRect","setCenter","setZoom","attr","scaleX","scaleY","curveProps","fill","sourceColor","targetColor","LinearGradient","color","offset","cb","rectEl","initProps"],"sources":["D:/code/java/program/oj/code/yuoj-frontend-master/node_modules/echarts/lib/chart/sankey/SankeyView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString, retrieve3 } from 'zrender/lib/core/util.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport View from '../../coord/View.js';\nvar SankeyPathShape = /** @class */function () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n  return SankeyPathShape;\n}();\nvar SankeyPath = /** @class */function (_super) {\n  __extends(SankeyPath, _super);\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n    ctx.closePath();\n  };\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  return SankeyPath;\n}(graphic.Path);\nvar SankeyView = /** @class */function (_super) {\n  __extends(SankeyView, _super);\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SankeyView.type;\n    _this._mainGroup = new graphic.Group();\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n  SankeyView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var mainGroup = this._mainGroup;\n    var layoutInfo = seriesModel.layoutInfo;\n    // view width\n    var width = layoutInfo.width;\n    // view height\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    mainGroup.removeAll();\n    mainGroup.x = layoutInfo.x;\n    mainGroup.y = layoutInfo.y;\n    this._updateViewCoordSys(seriesModel, api);\n    roamHelper.updateController(seriesModel, api, mainGroup, this._controller, this._controllerHost, null);\n    // generate a bezire Curve for each edge\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle());\n      // Special color, use source node color or target node color\n      applyCurveStyle(curve.style, orient, edge);\n      var defaultEdgeLabelText = \"\" + edgeModel.get('value');\n      var edgeLabelStateModels = getLabelStatesModels(edgeModel, 'edgeLabel');\n      setLabelStyle(curve, edgeLabelStateModels, {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName, dataType, labelDimIndex, formatter, extendParams) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'edge', labelDimIndex,\n            // ensure edgeLabel formatter is provided\n            // to prevent the inheritance from `label.formatter` of the series\n            retrieve3(formatter, edgeLabelStateModels.normal && edgeLabelStateModels.normal.get('formatter'), defaultEdgeLabelText), extendParams);\n          }\n        },\n        labelDataIndex: edge.dataIndex,\n        defaultText: defaultEdgeLabelText\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        var style = model.getItemStyle();\n        applyCurveStyle(style, orient, edge);\n        return style;\n      });\n      mainGroup.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus === 'trajectory' ? edge.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    // Generate a rect for each node\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy,\n          r: borderRadius\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'node');\n          }\n        },\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      mainGroup.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus === 'trajectory' ? node.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      mainGroup.setClipPath(createGridClipShape(mainGroup.getBoundingRect(), seriesModel, function () {\n        mainGroup.removeClipPath();\n      }));\n    }\n    this._data = seriesModel.getData();\n  };\n  SankeyView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  SankeyView.prototype._updateViewCoordSys = function (seriesModel, api) {\n    var layoutInfo = seriesModel.layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var viewCoordSys = seriesModel.coordinateSystem = new View(null, {\n      api: api,\n      ecModel: seriesModel.ecModel\n    });\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(0, 0, width, height);\n    viewCoordSys.setCenter(seriesModel.get('center'));\n    viewCoordSys.setZoom(seriesModel.get('zoom'));\n    this._controllerHost.target.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n  };\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView);\n/**\n * Special color, use source node color or target node color\n * @param curveProps curve's style to parse\n * @param orient direction\n * @param edge current curve data\n */\nfunction applyCurveStyle(curveProps, orient, edge) {\n  switch (curveProps.fill) {\n    case 'source':\n      curveProps.fill = edge.node1.getVisual('color');\n      curveProps.decal = edge.node1.getVisual('style').decal;\n      break;\n    case 'target':\n      curveProps.fill = edge.node2.getVisual('color');\n      curveProps.decal = edge.node2.getVisual('style').decal;\n      break;\n    case 'gradient':\n      var sourceColor = edge.node1.getVisual('color');\n      var targetColor = edge.node2.getVisual('color');\n      if (isString(sourceColor) && isString(targetColor)) {\n        curveProps.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n          color: sourceColor,\n          offset: 0\n        }, {\n          color: targetColor,\n          offset: 1\n        }]);\n      }\n  }\n}\n// Add animation to the view\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nexport default SankeyView;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}